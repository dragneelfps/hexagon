



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="The atoms of your platform">
      
      
        <link rel="canonical" href="https://hexagonkt.com/port_http_server/">
      
      
        <meta name="author" content="Juanjo Aguililla">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>HTTP Server - Hexagon</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546691">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Titillium Web","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../css/mkdocs_palette.css">
    
      <link rel="stylesheet" href="../css/mkdocs.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-48216810-3", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<meta name="keywords" content="Hexagon, microservices, Kotlin, RabbitMQ, MongoDB, JVM, Web" />
<meta name="application-name" content="Hexagon" />
<meta name="theme-color" content="#135AA1" />

<meta name="msapplication-navbutton-color" content="#135AA1" />
<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#135AA1">
<meta name="msapplication-TileImage" content="/apple-touch-icon.png">

<meta name="apple-mobile-web-app-status-bar-style" content="#135AA1" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-capable" content="yes" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@hexagon_kt">
<meta name="twitter:creator" content="@hexagon_kt">
<meta name="twitter:title" content="Hexagon">
<meta name="twitter:description" content="Hexagon is a microservices toolkit written in Kotlin. Its purpose is to ease the building of services (Web applications, APIs or queue consumers) that run inside a cloud platform
">
<meta name="twitter:image" content="https://hexagonkt.comapple-touch-icon.png">

<meta property="og:title" content="Hexagon" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hexagonkt.com" />
<meta property="og:image" content="https://hexagonkt.comapple-touch-icon.png" />
<meta property="og:description" content="Hexagon is a microservices toolkit written in Kotlin. Its purpose is to ease the building of services (Web applications, APIs or queue consumers) that run inside a cloud platform
" />

<meta itemprop="name" content="Hexagon">
<meta itemprop="description" content="Hexagon is a microservices toolkit written in Kotlin. Its purpose is to ease the building of services (Web applications, APIs or queue consumers) that run inside a cloud platform
 ">
<meta itemprop="image" content="https://hexagonkt.comapple-touch-icon.png">

<link rel="author" href="/humans.txt" />
<link rel="manifest" href="/manifest.json">

<!-- Web worker -->
<!--
<script>
if ('serviceWorker' in navigator)
  navigator.serviceWorker
    .register('/service_worker.js')
    .then(function() { console.log('Worker Registered'); });
</script>
-->

  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#server" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://hexagonkt.com" title="Hexagon" class="md-header-nav__button md-logo">
          
            <img src="../img/logo_white.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Hexagon
            </span>
            <span class="md-header-nav__topic">
              
                HTTP Server
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/hexagonkt/hexagon/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://hexagonkt.com" title="Hexagon" class="md-nav__button md-logo">
      
        <img src="../img/logo_white.svg" width="48" height="48">
      
    </a>
    Hexagon
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/hexagonkt/hexagon/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quick_start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../developer_guide/" title="Developer Guide" class="md-nav__link">
      Developer Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        HTTP Server
      </label>
    
    <a href="./" title="HTTP Server" class="md-nav__link md-nav__link--active">
      HTTP Server
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Page Contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servlet-web-server" class="md-nav__link">
    Servlet Web server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    Routes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#route-groups" class="md-nav__link">
    Route groups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routers" class="md-nav__link">
    Routers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call" class="md-nav__link">
    Call
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-parameters" class="md-nav__link">
    Path Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-parameters" class="md-nav__link">
    Query Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirects" class="md-nav__link">
    Redirects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookies" class="md-nav__link">
    Cookies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    Sessions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#halting" class="md-nav__link">
    Halting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filters" class="md-nav__link">
    Filters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-errors-handlers" class="md-nav__link">
    HTTP Errors Handlers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception-mapping" class="md-nav__link">
    Exception Mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files" class="md-nav__link">
    Static Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mime-types" class="md-nav__link">
    MIME types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    CORS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    HTTPS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-tests" class="md-nav__link">
    Integration tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mocking-calls" class="md-nav__link">
    Mocking calls
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packages" class="md-nav__link">
    Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    Index
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../examples/" title="Examples" class="md-nav__link">
      Examples
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hexagon_core/" title="Core" class="md-nav__link">
      Core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hexagon_scheduler/" title="Scheduler" class="md-nav__link">
      Scheduler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hexagon_web/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Ports
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Ports
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        HTTP Server
      </label>
    
    <a href="./" title="HTTP Server" class="md-nav__link md-nav__link--active">
      HTTP Server
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Page Contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servlet-web-server" class="md-nav__link">
    Servlet Web server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    Routes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#route-groups" class="md-nav__link">
    Route groups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routers" class="md-nav__link">
    Routers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call" class="md-nav__link">
    Call
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-parameters" class="md-nav__link">
    Path Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-parameters" class="md-nav__link">
    Query Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirects" class="md-nav__link">
    Redirects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookies" class="md-nav__link">
    Cookies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    Sessions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#halting" class="md-nav__link">
    Halting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filters" class="md-nav__link">
    Filters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-errors-handlers" class="md-nav__link">
    HTTP Errors Handlers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception-mapping" class="md-nav__link">
    Exception Mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files" class="md-nav__link">
    Static Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mime-types" class="md-nav__link">
    MIME types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    CORS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    HTTPS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-tests" class="md-nav__link">
    Integration tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mocking-calls" class="md-nav__link">
    Mocking calls
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packages" class="md-nav__link">
    Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    Index
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../port_http_client/" title="HTTP Client" class="md-nav__link">
      HTTP Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../port_store/" title="Store" class="md-nav__link">
      Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../port_messaging/" title="Messaging" class="md-nav__link">
      Messaging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../port_templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Adapters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Adapters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1">
    
    <label class="md-nav__link" for="nav-8-1">
      HTTP Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        HTTP Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../http_server_jetty/" title="Jetty" class="md-nav__link">
      Jetty
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../http_server_servlet/" title="Servlet" class="md-nav__link">
      Servlet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2">
    
    <label class="md-nav__link" for="nav-8-2">
      HTTP Client
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        HTTP Client
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../http_client_ahc/" title="Async HTTP Client" class="md-nav__link">
      Async HTTP Client
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3" type="checkbox" id="nav-8-3">
    
    <label class="md-nav__link" for="nav-8-3">
      Store
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-3">
        Store
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../store_mongodb/" title="MongoDB" class="md-nav__link">
      MongoDB
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4" type="checkbox" id="nav-8-4">
    
    <label class="md-nav__link" for="nav-8-4">
      Messaging
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-4">
        Messaging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../messaging_rabbitmq/" title="RabbitMQ" class="md-nav__link">
      RabbitMQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-5" type="checkbox" id="nav-8-5">
    
    <label class="md-nav__link" for="nav-8-5">
      Templates
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-5">
        Templates
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../templates_pebble/" title="Pebble" class="md-nav__link">
      Pebble
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../create_services/" title="Create Services" class="md-nav__link">
      Create Services
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../gradle/" title="Gradle Helpers" class="md-nav__link">
      Gradle Helpers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Contribute
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Contribute
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/hexagonkt/hexagon/blob/master/contributing.md" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/hexagonkt/hexagon/projects/1" title="Planning" class="md-nav__link">
      Planning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/hexagonkt/hexagon/milestones" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/hexagonkt" title="Organization" class="md-nav__link">
      Organization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../help/" title="Help and Support" class="md-nav__link">
      Help and Support
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Page Contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servlet-web-server" class="md-nav__link">
    Servlet Web server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    Routes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#route-groups" class="md-nav__link">
    Route groups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routers" class="md-nav__link">
    Routers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call" class="md-nav__link">
    Call
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-parameters" class="md-nav__link">
    Path Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-parameters" class="md-nav__link">
    Query Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirects" class="md-nav__link">
    Redirects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookies" class="md-nav__link">
    Cookies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    Sessions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#halting" class="md-nav__link">
    Halting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filters" class="md-nav__link">
    Filters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-errors-handlers" class="md-nav__link">
    HTTP Errors Handlers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception-mapping" class="md-nav__link">
    Exception Mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files" class="md-nav__link">
    Static Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mime-types" class="md-nav__link">
    MIME types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    CORS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    HTTPS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-tests" class="md-nav__link">
    Integration tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mocking-calls" class="md-nav__link">
    Mocking calls
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packages" class="md-nav__link">
    Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    Index
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  
    <a href="https://github.com/hexagonkt/hexagon/edit/master/port_http_server/README.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
  
  
    <h1>HTTP Server</h1>
  
  <p><a href="./">port_http_server</a></p>
<p>This port's purpose is to develop HTTP servers (REST services or Web applications). It defines a DSL
to declare HTTP request handlers.</p>
<p>Adapters implementing this port are responsible of transforming the DSL into a runtime. And allows
you to switch implementations without changing the service.</p>
<p>The <a href="/hexagon_web">hexagon_web</a> module provides utilities on top of this port for Web application development
(like templates helpers).</p>
<h4 id="server">Server<a class="headerlink" href="#server" title="Permanent link">&para;</a></h4>
<p>A server is a process listening to HTTP requests on a TCP port.</p>
<p>You can run multiple ones on different ports at the same time (this can be useful to test many
microservices at the same time).</p>
<p>The server can be configured with different properties. If you do not provide a value for them, they
are searched inside the application settings and lastly, a default value is picked. This is the
parameters list:</p>
<ul>
<li>serviceName: name of this service, it is only informative and it is displayed on the logs. If not
  set <code class="codehilite"><span class="err">&lt;undefined&gt;</span></code> is used.</li>
<li>bindAddress: address to which this process is bound. If none is provided, <code class="codehilite"><span class="err">127.0.0.1</span></code> is taken.</li>
<li>bindPort: the port that the process listens to. By default it is <code class="codehilite"><span class="err">2010</span></code></li>
<li>contextPath: initial path used for the rest of the routes, by default it is empty.</li>
</ul>
<p>You can inject an adapter for the <code class="codehilite"><span class="err">Server</span></code> port using the <a href="/hexagon_core/#dependency-injection">InjectionManager</a> object:
<code class="codehilite"><span class="err">InjectionManager.bindObject&lt;ServerPort&gt;(JettyServletAdapter())</span></code></p>
<p>To create a server, you need to provide a router (check the <a href="/port_http_server/#routes">next section</a> for more information),
and after creating a server you can run it or stop it with <a href="com.hexagonkt.http.server/-server/start/">start</a> and <a href="com.hexagonkt.http.server/-server/stop/">stop</a> methods.</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:serverCreation</p>
<h5 id="servlet-web-server">Servlet Web server<a class="headerlink" href="#servlet-web-server" title="Permanent link">&para;</a></h5>
<p>There is an special server adapter for running inside Servlet Containers. To use it you should
import the <a href="/http_server_servlet">Servlet HTTP Server Adapter</a> into your project. Check the
<a href="/http_server_servlet">http_server_servlet</a> module for more information.</p>
<h4 id="routes">Routes<a class="headerlink" href="#routes" title="Permanent link">&para;</a></h4>
<p>The main building block of a Hexagon HTTP service is a set of routes. A route is made up of three
simple pieces:</p>
<ul>
<li>A <strong>verb</strong> (get, post, put, delete, head, trace, connect, options). It can also be <code class="codehilite"><span class="err">any</span></code>.</li>
<li>A <strong>path</strong> (/hello, /users/{name}). Paths must start with '/' and trailing slash is ignored.</li>
<li>A <strong>callback</strong> code block.</li>
</ul>
<p>The callback has a void return type. You should use <code class="codehilite"><span class="err">Call.send()</span></code> to set the response which will
be returned to the user.</p>
<p>Routes are matched in the order they are defined. The first route that matches the request is
invoked and the following ones are ignored.</p>
<p>Check the next snippet for usage examples:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:routesCreation</p>
<p>HTTP clients will be able to reuse the routes to create REST services clients.</p>
<h5 id="route-groups">Route groups<a class="headerlink" href="#route-groups" title="Permanent link">&para;</a></h5>
<p>Routes can be nested by calling the <code class="codehilite"><span class="err">path()</span></code> method, which takes a String prefix and gives you a
scope to declare routes and filters (or more nested paths). Ie:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:routeGroups</p>
<h5 id="routers">Routers<a class="headerlink" href="#routers" title="Permanent link">&para;</a></h5>
<p>If you have a lot of routes, it can be helpful to group them into routers. You can create routers
to mount a group of routes in different paths (allowing you to reuse them). Check this snippet:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:routers</p>
<h4 id="callbacks">Callbacks<a class="headerlink" href="#callbacks" title="Permanent link">&para;</a></h4>
<p>Callbacks are request's handling blocks that are bound to routes or filters. They make the request,
response and session objects available to the handling code.</p>
<h5 id="call">Call<a class="headerlink" href="#call" title="Permanent link">&para;</a></h5>
<p>The Call object provides you with everything you need to handle a http-request.</p>
<p>It contains the underlying request and response, and a bunch of utility methods to return results,
read parameters or pass attributes among filters/routes.</p>
<p>The methods are available directly from the callback (<code class="codehilite"><span class="err">Call</span></code> is the callback receiver). You can
check the <a href="/port_http_server/com.hexagonkt.http.server/-call/">API documentation</a> for the full list of methods.</p>
<p>This sample code illustrates the usage:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackCall</p>
<h5 id="request">Request<a class="headerlink" href="#request" title="Permanent link">&para;</a></h5>
<p>Request functionality is provided by the <code class="codehilite"><span class="err">request</span></code> field:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackRequest</p>
<h5 id="response">Response<a class="headerlink" href="#response" title="Permanent link">&para;</a></h5>
<p>Response information is provided by the <code class="codehilite"><span class="err">response</span></code> field:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackResponse</p>
<h5 id="path-parameters">Path Parameters<a class="headerlink" href="#path-parameters" title="Permanent link">&para;</a></h5>
<p>Route patterns can include named parameters, accessible via the <code class="codehilite"><span class="err">pathParameters</span></code> map on the request
object:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackPathParam</p>
<h5 id="query-parameters">Query Parameters<a class="headerlink" href="#query-parameters" title="Permanent link">&para;</a></h5>
<p>It is possible to access the whole query string or only an specific query parameter using the
<code class="codehilite"><span class="err">parameters</span></code> map on the <code class="codehilite"><span class="err">request</span></code> object:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackQueryParam</p>
<h5 id="redirects">Redirects<a class="headerlink" href="#redirects" title="Permanent link">&para;</a></h5>
<p>You can redirect requests (returning 30x codes) by using <code class="codehilite"><span class="err">Call</span></code> utility methods:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackRedirect</p>
<h5 id="cookies">Cookies<a class="headerlink" href="#cookies" title="Permanent link">&para;</a></h5>
<p>The request and response cookie functions provide a convenient way for sharing information between
handlers, requests, or even servers.</p>
<p>You can read client sent cookies from the request's <code class="codehilite"><span class="err">cookies</span></code> read only map. To change cookies or
add new ones you have to use <code class="codehilite"><span class="err">response.addCookie()</span></code> and <code class="codehilite"><span class="err">response.removeCookie()</span></code> methods.</p>
<p>Check the following sample code for details:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackCookie</p>
<h5 id="sessions">Sessions<a class="headerlink" href="#sessions" title="Permanent link">&para;</a></h5>
<p>Every request has access to the session created on the server side, the <code class="codehilite"><span class="err">session</span></code> object provides
the following methods:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackSession</p>
<h5 id="halting">Halting<a class="headerlink" href="#halting" title="Permanent link">&para;</a></h5>
<p>To immediately stop a request within a filter or route use <code class="codehilite"><span class="err">halt()</span></code>. <code class="codehilite"><span class="err">halt()</span></code> is not intended to be
used inside exception-mappers. Check the following snippet for an example:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:callbackHalt</p>
<h4 id="filters">Filters<a class="headerlink" href="#filters" title="Permanent link">&para;</a></h4>
<p>You might know filters as interceptors, or middleware from other libraries. Filters are blocks of
code executed before or after one or more routes. They can read the request and read/modify the
response.</p>
<p>All filters that match a route are executed in the order they are declared.</p>
<p>Filters optionally take a pattern, causing them to be executed only if the request path matches
that pattern.</p>
<p>Before and after filters are always executed (if the route is matched). But any of them may stop
the execution chain if halted.</p>
<p>If <code class="codehilite"><span class="err">halt()</span></code> is called in one filter, filter processing is stopped for that kind of filter (<em>before</em>
or <em>after</em>). In the case of before filters, this also prevent the route from being executed (but
after filters are executed anyway).</p>
<p>The following code details filters usage:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:filters</p>
<h4 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h4>
<p>You can provide handlers for runtime errors. Errors are unhandled thrown exceptions in the
callbacks, or handlers halted with an error code.</p>
<p>Error handlers for a given code or exception are unique, and the first one defined is the one that
will be used.</p>
<h5 id="http-errors-handlers">HTTP Errors Handlers<a class="headerlink" href="#http-errors-handlers" title="Permanent link">&para;</a></h5>
<p>Allows to handle routes halted with a given code. These handlers are only applied if the route is
halted, if the error code is returned with <code class="codehilite"><span class="err">send</span></code> it won't be handled as an error. Example:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:errors</p>
<h5 id="exception-mapping">Exception Mapping<a class="headerlink" href="#exception-mapping" title="Permanent link">&para;</a></h5>
<p>You can handle exceptions of a given type for all routes and filters. The handler allows you to
refer to the thrown exception. Look at the following code for a detailed example:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:exceptions</p>
<h4 id="static-files">Static Files<a class="headerlink" href="#static-files" title="Permanent link">&para;</a></h4>
<p>You can use a folder in the classpath for serving static files with the <code class="codehilite"><span class="err">get()</span></code> methods. Note that
the public directory name is not included in the URL.</p>
<p>Asset mapping is handled like any other route, so if an asset mapping is matched, no other route
will be checked (assets or other routes). And also, if a previous route is matched, the asset
mapping will never be checked.</p>
<p>Being <code class="codehilite"><span class="err">get(resource)</span></code> a shortcut of <code class="codehilite"><span class="err">get(&quot;/*&quot;, resource)</span></code> it should be placed as the last route.
Check the next example for details:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:files</p>
<h5 id="mime-types">MIME types<a class="headerlink" href="#mime-types" title="Permanent link">&para;</a></h5>
<p>The MIME types of static files are computed from the file extension using the
<a href="/hexagon_core/com.hexagonkt.serialization/-serialization-manager/content-type-of/">SerializationManager.contentTypeOf</a> method.</p>
<h4 id="cors">CORS<a class="headerlink" href="#cors" title="Permanent link">&para;</a></h4>
<p>CORS behaviour can be different depending on the path. You can attach different <a href="/port_http_server/com.hexagonkt.http.server/-cors-settings/">CorsSettings</a> to
different routers. Check <a href="/port_http_server/com.hexagonkt.http.server/-cors-settings/">CorsSettings</a> class for more details.</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/examples/CorsTest.kt:cors</p>
<h4 id="https">HTTPS<a class="headerlink" href="#https" title="Permanent link">&para;</a></h4>
<p>It is possible to start a secure server enabling HTTPS. For this, you have to provide a server
certificate and its key in the server's <a href="/hexagon_core/com.hexagonkt.http/-ssl-settings/">SslSettings</a>. Once you use a server certificate, it is also
possible to serve content using <a href="https://en.wikipedia.org/wiki/HTTP/2">HTTP/2</a>, for this to work, <a href="https://en.wikipedia.org/wiki/Application-Layer_Protocol_Negotiation">ALPN</a> is required (however, this is
already handled if you use Java 11).</p>
<p>The certificate common name should match the host that will serve the content in order to be
accepted by an HTTP client without a security error. There is a <a href="https://gradle.org">Gradle</a> helper to
<a href="/gradle/#certificates">create sample certificates</a> for development purposes.</p>
<p>HTTP clients can also be configured to use a certificate. This is required to implement a double
ended authorization (<a href="https://en.wikipedia.org/wiki/Mutual_authentication">mutual TLS</a>). This is also done by passing a <a href="/hexagon_core/com.hexagonkt.http/-ssl-settings/">SslSettings</a> object the the
HTTP client.</p>
<p>If you want to implement mutual trust, you must enforce client certificate in the server
configuration (check <a href="/hexagon_core/com.hexagonkt.http/-ssl-settings/client-auth">SslSettings.clientAuth</a>). If this is done, you can access the certificate the
client used to connect (assuming it is valid, if not the connection will end with an error) with the
<a href="/port_http_server/com.hexagonkt.http.server/-request/certificate-chain">Request.certificateChain</a> property.</p>
<p>Below you can find a simple example to set up an HTTPS server and client with mutual TLS:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/examples/HttpsTest.kt:https</p>
<h4 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h4>
<h5 id="integration-tests">Integration tests<a class="headerlink" href="#integration-tests" title="Permanent link">&para;</a></h5>
<p>To test HTTP servers from outside using a real Adapter, you can create a server setting <code class="codehilite"><span class="err">0</span></code> as port.
This will pick a random free port that you can check later:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/PortHttpServerSamplesTest.kt:test</p>
<p>To do this kind of tests without creating a custom server (using the real production code).
Check the <a href="https://github.com/hexagonkt/gradle_starter/blob/master/src/test/kotlin/GradleStarterTest.kt">tests of the starter projects</a>.</p>
<h5 id="mocking-calls">Mocking calls<a class="headerlink" href="#mocking-calls" title="Permanent link">&para;</a></h5>
<p>To unit test callbacks you can create test calls with hardcoded requests, responses and sessions.</p>
<p>To use it in your project you'll have to include a dependency (with test scope):</p>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">build.gradle</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="n">testImplementation</span><span class="o">(</span><span class="s2">&quot;com.hexagonkt:port_http_server:$hexagonVersion:test&quot;</span><span class="o">)</span>
</pre></div></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">pom.xml</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.hexagonkt<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>port_http_server<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>$hexagonVersion<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div></div>
</div>
<p>Check <a href="/port_http_server/com.hexagonkt.http.server.test/test-call/">testCall</a>, <a href="/port_http_server/com.hexagonkt.http.server.test/-test-request/">TestRequest</a>, <a href="#">TestResponse</a> and <a href="#">TestSession</a> for more details.</p>
<p>For a quick sample, check the snipped below:</p>
<p>@sample port_http_server/src/test/kotlin/com/hexagonkt/http/server/TestsTest.kt:test</p>
<h4 id="packages">Packages<a class="headerlink" href="#packages" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="com.hexagonkt.http.server/">com.hexagonkt.http.server</a></td>
<td>This package defines the classes used in the HTTP DSL.</td>
</tr>
</tbody>
</table>
<h4 id="index">Index<a class="headerlink" href="#index" title="Permanent link">&para;</a></h4>
<p><a href="alltypes/">All Types</a></p>
  
    
  

              
  


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "https://hexagonkt.com/port_http_server/";
      this.page.identifier =
        "/port_http_server/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//hexagonkt-com.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>


            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a
            href="../hexagon_web/"
            title="Web"
            class="md-flex md-footer-nav__link md-footer-nav__link--prev"
            rel="prev">

            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Web
              </span>
            </div>
          </a>
        
        
          <a
            href="../port_http_client/"
            title="HTTP Client"
            class="md-flex md-footer-nav__link md-footer-nav__link--next"
            rel="next">

            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                HTTP Client
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Made with <i class="fa fa-heart"></i> by <a href="https://github.com/hexagonkt/hexagon/graphs/contributors">OSS contributors</a>. Licensed under <a href="https://github.com/hexagonkt/hexagon/blob/master/license.md">MIT License</a>

          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and <a href="https://squidfunk.github.io/mkdocs-material/"> Material for MkDocs</a>
        <div class="social-buttons">
          <a
            class="github-button"
            href="https://github.com/hexagonkt/hexagon/"
            data-icon="octicon-star"
            data-show-count="true"
            aria-label="Star hexagonkt/hexagon on GitHub">Star</a>
          <a
            class="github-button"
            href="https://github.com/hexagonkt/hexagon/subscription"
            data-icon="octicon-eye"
            data-show-count="true"
            aria-label="Watch hexagonkt/hexagon on GitHub">Watch</a>
          <a
            class="github-button"
            href="https://github.com/hexagonkt/hexagon/fork"
            data-icon="octicon-git-branch"
            data-show-count="true"
            aria-label="Fork hexagonkt/hexagon on GitHub">Fork</a>
          <a
            class="twitter-share-button"
            href="https://twitter.com/share?text=Hexagon Kotlin library">Tweet</a>
        </div>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/hexagonkt/hexagon" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/hexagon_kt" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://kotlinlang.slack.com/messages/hexagon" class="md-footer-social__link fa fa-slack"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="https://buttons.github.io/buttons.js"></script>
      
        <script src="https://platform.twitter.com/widgets.js"></script>
      
    
  </body>
</html>